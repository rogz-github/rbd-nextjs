generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id              Int       @id @default(autoincrement())
  firstName       String
  lastName        String
  username        String    @unique
  email           String    @unique
  emailVerifiedAt DateTime?
  password        String
  rememberToken   String?
  image           String?
  role            Role      @default(USER)
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
}

model Product {
  spuNo             String   @map("spu_no")
  itemNo            String?  @unique @map("item_no")
  slug              String   @unique
  fullCategory      String   @map("full_category")
  category1         String   @map("category_1")
  category2         String?  @map("category_2")
  category3         String?  @map("category_3")
  category4         String?  @map("category_4")
  name              String
  supplier          String?
  brand             String?
  vt1               String?  @map("vt1")
  vv1               String?  @map("vv1")
  vt2               String?  @map("vt2")
  vv2               String?  @map("vv2")
  sku               String?  @unique
  msrp              Decimal? @db.Decimal(10, 2)
  salePrice         Decimal? @map("sale_price") @db.Decimal(10, 2)
  discountedPrice   Decimal? @map("discounted_price") @db.Decimal(10, 2)
  dropshippingPrice Decimal? @map("dropshipping_price") @db.Decimal(10, 2)
  map               String?
  inventory         String   @default("0")
  inventoryLoc      String?  @map("inventory_loc")
  shippingMethod    String?  @map("shipping_method")
  shipTo            String?  @map("ship_to")
  shippingCost      String   @default("0") @map("shipping_cost")
  promotionStart    String?  @map("promotion_start")
  promotionEnd      String?  @map("promotion_end")
  mainImage         String   @map("main_image")
  images            Json?
  description       String?
  shortDescription  String?  @map("short_description")
  upc               String?
  asin              String?
  processingTime    String?  @map("processing_time")
  ean               String?
  dsFrom            String?  @map("ds_from")
  dealId            String?  @map("deal_id")
  status            String   @default("active")
  metaTitle         String?  @map("meta_title")
  metaDescription   String?  @map("meta_description")
  metaKeywords      String?  @map("meta_keywords")
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  id                Int      @id @default(autoincrement())
  cartItems         Cart[]

  @@index([spuNo])
  @@index([itemNo])
  @@index([slug])
  @@index([fullCategory])
  @@index([category1])
  @@index([category2])
  @@index([category3])
  @@index([category4])
  @@index([name])
  @@index([supplier])
  @@index([brand])
  @@index([vt1])
  @@index([vv1])
  @@index([vt2])
  @@index([vv2])
  @@index([sku])
  @@index([salePrice])
  @@index([discountedPrice])
  @@index([dropshippingPrice])
  @@index([map])
  @@index([dsFrom])
  @@index([status])
}

model Cart {
  id           Int      @id @default(autoincrement())
  userType     String   @default("guest") @map("user_type")
  userId       Int      @map("user_id")
  prodQuantity Int      @map("prod_quantity")
  status       String   @default("active")
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  prodId       Int      @map("prod_id")
  product      Product  @relation(fields: [prodId], references: [id])

  @@index([userId])
  @@index([prodId])
  @@index([status])
}

model Order {
  coId                Int      @id @default(autoincrement()) @map("co_id")
  coOrderId           String   @map("co_order_id") @db.VarChar(1000)
  coUserId            Int      @map("co_user_id")
  coType              String   @map("co_type") @db.VarChar(1000)
  coNotes             String   @map("co_notes")
  coSubtotal          Decimal  @map("co_subtotal") @db.Decimal(10, 2)
  coTotalDiscount     Decimal  @map("co_total_discount") @db.Decimal(10, 2)
  coTotalPrice        Decimal  @map("co_total_price") @db.Decimal(10, 2)
  coPaymentType       String   @map("co_payment_type") @db.VarChar(1000)
  coStatus            String   @default("Pending") @map("co_status") @db.VarChar(1000)
  coPendingDate       String?  @map("co_pending_date") @db.VarChar(1000)
  coProcessingDate    String?  @map("co_processing_date") @db.VarChar(1000)
  coDeliveredDate     String?  @map("co_delivered_date") @db.VarChar(1000)
  coCancelledDate     String?  @map("co_cancelled_date") @db.VarChar(1000)
  coCreated           String   @map("co_created") @db.VarChar(1000)
  coStyle             String   @default("new") @map("co_style") @db.VarChar(5)
  coCoupoUsed         String?  @map("co_coupo_used") @db.VarChar(55)
  coCouponDiscount    String?  @map("co_coupon_discount") @db.VarChar(55)
  coUpdatedStatusTo   String?  @map("co_updated_status_to") @db.VarChar(100)
  coUpdatedStatusDate String?  @map("co_updated_status_date") @db.VarChar(100)
  orderItems          String   @default("[]") @map("order_items")
  shippingAddress     String   @default("{}") @map("shipping_address")
  billingAddress      String   @default("{}") @map("billing_address")
  totalItems          Int      @default(0) @map("total_items")
  paypalResponse      String?  @map("paypal_response")
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  @@index([coOrderId])
  @@index([coUserId])
  @@index([coStatus])
}

model Banner {
  id          Int        @id @default(autoincrement())
  title       String
  description String?
  imageUrl    String?    @map("image_url")
  videoUrl    String?    @map("video_url")
  link        String?
  type        BannerType @default(IMAGE)
  position    Int        @default(0)
  isActive    Boolean    @default(true) @map("is_active")
  startDate   DateTime?  @map("start_date")
  endDate     DateTime?  @map("end_date")
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt

  @@index([isActive])
  @@index([position])
  @@index([type])
}

model BannerBottomImages {
  id      Int      @id @default(autoincrement())
  bgColor String?  @map("bg_color")
  linkUrl String?  @map("link_url")
  image   String?
  status  String   @default("active")
  created DateTime @default(now())

  @@map("banner_bottom_images")
}

enum Role {
  USER
  ADMIN
  SUPER_ADMIN
}

enum BannerType {
  IMAGE
  VIDEO
}
